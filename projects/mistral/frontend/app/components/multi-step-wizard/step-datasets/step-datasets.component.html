<form [formGroup]="form" (ngSubmit)="goToNext()">
  <div class="tab-pane fade show active mt-4">
    <h4 class="head text-center">{{ title }}</h4>
    <br />
    <ngx-spinner
      type="ball-scale-multiple"
      bdColor="rgba(255,255,255,0.8)"
      color="#6c757d"
      zIndex="1000"
      [fullScreen]="false"
      size="medium"
    >
    </ngx-spinner>
    <!--
        <ul>
          <li formArrayName="datasets" *ngFor="let ds of form.controls.datasets['controls']; let i = index">
              <input class="mst--input-checkbox" type="checkbox" [formControlName]="i" id="{{datasets[i].id}}">
              <label for="{{datasets[i].id}}">{{datasets[i].description}}</label>
          </li>
        </ul>
        -->
    <div class="row justify-content-md-center">
      <div class="col-12 col-lg-3 mb-2">
        <h5>
          <img
            src="/app/custom/assets/images/icon_obs_sm.png"
            alt="OBS"
            class="me-1"
          />Observations
        </h5>
        <div class="disclaimer ms-2 mb-2"> <i class="fas fa-info-circle me-1" style="color: #157ACC;"></i
          >Dati in tempo reale non sottoposti a validazione</div>
        <div class="clearfix">
          <ul class="vertical-list px-0">
            <ng-container
              *ngFor="
                let ds of form.controls.datasets['controls'];
                let i = index
              "
            >
              <li
                formArrayName="datasets"
                *ngIf="datasets[i].category === 'OBS'"
              >
                <input
                  class="mst--input-checkbox"
                  type="checkbox"
                  [formControlName]="i"
                  id="OBS-{{ datasets[i].id }}"
                />
                <label
                  for="OBS-{{ datasets[i].id }}"
                  [ngbTooltip]="tipOBSContent"
                  >{{ datasets[i].description }}</label
                >
                <ng-template #tipOBSContent>
                  <ul class="ps-0 text-start">
                    <li>
                      <!--                                            <i class="fas" [ngClass]="(datasets[i].license === 'CCBY4.0') ? 'fa-closed-captioning' : 'fa-copyright'"></i>-->
                      <span class="ps-1">{{ datasets[i].license }}</span>
                    </li>
                    <li>
                      <!--                                            <i class="fab fa-creative-commons-by"></i>-->
                      <span class="ps-1">{{ datasets[i].attribution }}</span>
                    </li>
                  </ul>
                </ng-template>
              </li>
            </ng-container>
          </ul>
        </div>
      </div>
      <div class="col-12 col-lg-3 mb-2 border-end border-start">
        <h5>
          <img
            src="/app/custom/assets/images/icon_for_sm.png"
            alt="FOR"
            class="me-1"
          />Forecasts
        </h5>
        <div class="clearfix">
          <ul class="vertical-list px-0">
            <ng-container
              *ngFor="
                let ds of form.controls.datasets['controls'];
                let i = index
              "
            >
              <li
                formArrayName="datasets"
                *ngIf="datasets[i].category === 'FOR'"
              >
                <input
                  class="mst--input-checkbox"
                  type="checkbox"
                  [formControlName]="i"
                  id="FOR-{{ datasets[i].id }}"
                />
                <label
                  for="FOR-{{ datasets[i].id }}"
                  [ngbTooltip]="tipFORContent"
                  >{{ datasets[i].description }}</label
                >
                <ng-template #tipFORContent>
                  <ul class="ps-0 text-start">
                    <li>
                      <span class="ps-1">{{ datasets[i].license }}</span>
                    </li>
                    <li>
                      <span class="ps-1">{{ datasets[i].attribution }}</span>
                    </li>
                  </ul>
                </ng-template>
              </li>
            </ng-container>
          </ul>
        </div>
      </div>
      <div class="col-12 col-lg-3 mb-2 border-end">
        <h5>
          <img
            src="/app/custom/assets/images/icon_sea_sm.png"
            alt="SEA"
            class="me-1"
          />Marine Forecasts
        </h5>
        <div class="clearfix">
          <ul class="vertical-list px-0">
            <ng-container
              *ngFor="
                let ds of form.controls.datasets['controls'];
                let i = index
              "
            >
              <li
                formArrayName="datasets"
                *ngIf="datasets[i].category === 'SEA'"
              >
                <input
                  class="mst--input-checkbox"
                  type="checkbox"
                  [formControlName]="i"
                  id="SEA-{{ datasets[i].id }}"
                />
                <label
                  for="SEA-{{ datasets[i].id }}"
                  [ngbTooltip]="tipSEAContent"
                  >{{ datasets[i].description }}</label
                >
                <ng-template #tipSEAContent>
                  <ul class="ps-0 text-start">
                    <li>
                      <span class="ps-1">{{ datasets[i].license }}</span>
                    </li>
                    <li>
                      <span class="ps-1">{{ datasets[i].attribution }}</span>
                    </li>
                  </ul>
                </ng-template>
              </li>
            </ng-container>
          </ul>
        </div>
      </div>
      <div class="col-12 col-lg-3 mb-2">
        <h5>
          <img
            src="/app/custom/assets/images/icon_rad_sm.png"
            alt="RAD"
            class="me-1"
          />Radar
        </h5>
        <div class="clearfix">
          <ul class="vertical-list px-0">
            <ng-container
              *ngFor="
                let ds of form.controls.datasets['controls'];
                let i = index
              "
            >
              <li
                formArrayName="datasets"
                *ngIf="datasets[i].category === 'RAD'"
              >
                <input
                  class="mst--input-checkbox"
                  type="checkbox"
                  [formControlName]="i"
                  id="RAD-{{ datasets[i].id }}"
                />
                <label
                  for="RAD-{{ datasets[i].id }}"
                  [ngbTooltip]="tipRADContent"
                  >{{ datasets[i].description }}</label
                >
                <ng-template #tipRADContent>
                  <ul class="ps-0 text-start">
                    <li>
                      <span class="ps-1">{{ datasets[i].license }}</span>
                    </li>
                    <li>
                      <span class="ps-1">{{ datasets[i].attribution }}</span>
                    </li>
                  </ul>
                </ng-template>
              </li>
            </ng-container>
          </ul>
        </div>
      </div>
    </div>
    <div class="mb-3 text-center">
      <button
        class="btn btn-border-classic"
        type="submit"
        [disabled]="
          !form.valid ||
          selectedCategories.length > 1 ||
          selectedLicenseGroups.length > 1
        "
      >
        Next <i class="fa fa-arrow-right" aria-hidden="true"></i>
      </button>
    </div>
  </div>
</form>
