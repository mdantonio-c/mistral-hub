<div class="modal-body">
  <div class="row">
    <div class="col">
      <div class="ds-picture" [ngSwitch]="dataset.category">
        <img
          *ngSwitchCase="'OBS'"
          src="/app/custom/assets/images/icon_obs_sm.png"
        />
        <img
          *ngSwitchCase="'RAD'"
          src="/app/custom/assets/images/icon_rad_sm.png"
        />
        <img
          *ngSwitchCase="'FOR'"
          src="/app/custom/assets/images/icon_for_sm.png"
        />
      </div>
      <div class="ds-body">
        <div>
          <h5>{{ dataset.name }}</h5>
          <p>{{ dataset.description }}</p>
          <!--      <small class="d-block">Product type: {{dataset.category}}</small>-->
          <small class="d-block">Attribution: {{ dataset.attribution }}</small>
          <small class="d-block">License: {{ dataset.license }}</small>
        </div>
      </div>
    </div>
    <div class="fixed-col mx-2">
      <button
        type="button"
        class="btn close"
        aria-label="Close"
        (click)="activeModal.dismiss()"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col">
      <ul
        ngbNav
        #nav="ngbNav"
        [(activeId)]="active"
        class="nav-tabs navbar-custom"
      >
        <li [ngbNavItem]="1">
          <a ngbNavLink>Download open data</a>
          <ng-template ngbNavContent>
            <ngx-spinner [fullScreen]="false"></ngx-spinner>
            <!-- no data -->
            <div *ngIf="!loading && !data?.length">
              <div class="no-results">
                <h2>No Data</h2>
              </div>
            </div>
            <!-- load opendata in the table -->
            <div
              class="table-responsive mb-2"
              *ngIf="data?.length"
              #tableWrapper
            >
              <ngx-datatable
                #openDataTable
                class="bootstrap expandable"
                [rows]="data"
                [columnMode]="ColumnMode.flex"
                [headerHeight]="50"
                [footerHeight]="50"
                rowHeight="auto"
              >
                <!-- Date -->
                <ngx-datatable-column
                  name="date"
                  [resizeable]="false"
                  [sortable]="true"
                  [draggable]="false"
                  [flexGrow]="1.6"
                  [minWidth]="120"
                >
                  <ng-template
                    let-value="value"
                    let-row="row"
                    ngx-datatable-cell-template
                  >
                    <span>{{ value | amFromUtc | date: "yyyy-MM-dd" }}</span>
                  </ng-template>
                </ngx-datatable-column>
                <!-- Run -->
                <ngx-datatable-column
                  prop="run"
                  [resizeable]="false"
                  [sortable]="false"
                  [draggable]="false"
                  [flexGrow]="0.5"
                  [minWidth]="66"
                >
                  <ng-template
                    let-value="value"
                    let-row="row"
                    ngx-datatable-cell-template
                  >
                    <span>{{ value }}</span>
                  </ng-template>
                </ngx-datatable-column>
                <!-- Download -->
                <ngx-datatable-column
                  name="Download"
                  [resizeable]="false"
                  [sortable]="false"
                  [draggable]="false"
                  [canAutoResize]="false"
                >
                  <ng-template
                    let-value="value"
                    let-row="row"
                    ngx-datatable-cell-template
                  >
                    <button class="btn p-0" (click)="download(row.filename)">
                      GRIB data <i class="fa fa-download ml-2"></i>
                    </button>
                  </ng-template>
                </ngx-datatable-column>
              </ngx-datatable>
            </div>
          </ng-template>
        </li>
      </ul>
      <div [ngbNavOutlet]="nav" class="mt-2"></div>
    </div>
  </div>
</div>
