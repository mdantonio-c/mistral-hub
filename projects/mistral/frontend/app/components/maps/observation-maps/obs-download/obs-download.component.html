<div class="download">
  <form #form="ngForm" (ngSubmit)="download()">
    <div class="form-group hidden">
      <div class="input-group">
        <input
          name="datepicker"
          class="form-control"
          ngbDatepicker
          container="body"
          #datepicker="ngbDatepicker"
          [autoClose]="'outside'"
          [maxDate]="maxDate"
          (dateSelect)="onDateSelection($event)"
          [displayMonths]="2"
          [dayTemplate]="t"
          outsideDays="hidden"
          placement="top"
          [positionTarget]="fromButtonEl"
          [startDate]="fromDate!"
        />
        <ng-template #t let-date let-focused="focused">
          <span
            class="custom-day"
            [class.focused]="focused"
            [class.range]="isRange(date)"
            [class.faded]="isHovered(date) || isInside(date)"
            (mouseenter)="hoveredDate = date"
            (mouseleave)="hoveredDate = null"
          >
            {{ date.day }}
          </span>
        </ng-template>
      </div>
    </div>
    <div class="form-group mb-2">
      <label for="fromDate">From</label>
      <div class="input-group">
        <input
          #dpFromDate
          id="fromDate"
          class="form-control"
          placeholder="dd/mm/yyyy"
          name="dpFromDate"
          [value]="formatter.format(fromDate)"
          (input)="fromDate = validateInput(fromDate, dpFromDate.value)"
        />
        <div class="input-group-append">
          <button
            #fromButtonEl
            class="btn btn-outline-secondary"
            (click)="datepicker.toggle()"
            type="button"
          >
            <i class="fa fa-calendar"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="toDate">To</label>
      <div class="input-group">
        <input
          #dpToDate
          id="toDate"
          class="form-control"
          placeholder="dd/mm/yyyy"
          name="dpToDate"
          [value]="formatter.format(toDate)"
          (input)="toDate = validateInput(toDate, dpToDate.value)"
        />
        <div class="input-group-append">
          <button
            class="btn btn-outline-secondary"
            (click)="datepicker.toggle()"
            type="button"
          >
            <i class="fa fa-calendar"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Format -->
    <div class="form-group">
      <label for="format">Format</label>
      <select
        id="format"
        name="format"
        class="form-control"
        [(ngModel)]="model.format"
      >
        <option *ngFor="let f of allFormats" [ngValue]="f">{{ f }}</option>
      </select>
    </div>

    <div class="text-center mt-4">
      <button
        type="submit"
        class="btn btn-primary no-rounded ml-2"
        [disabled]="form.invalid || !filter"
      >
        <i class="fas fa-download"></i>
        Download
      </button>
    </div>
  </form>
  <!--    <hr/>-->
  <!--    <pre>From date model: {{ fromDate | json }}</pre>-->
  <!--    <pre>To date model: {{ toDate | json }}</pre>-->
</div>
