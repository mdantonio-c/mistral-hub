<div class="card">
    <div class="card-header">
        <div class="row">
            <div class="col-lg badges">
                <button id="show-button" type="button" class="btn btn-default btn-lg" hidden>
                    <i class="fas fa-bars"></i>
                </button>
                <h4>
                    <span class="badge badge-info">{{ getValue('field', filter.field) }}</span>
                </h4>
                <h4>
                    <span class="badge badge-success">{{ filter.run }}</span>
                </h4>
                <h4>
                    <span class="badge badge-warning">{{ getValue('res', filter.res) }} Km</span>
                </h4>
                <h4>
                    <span class="badge badge-secondary">{{ getValue('area', filter.area) }}</span>
                </h4>
            </div>
            <div class="col-lg">
                <loading *ngIf="isLegendLoading"></loading>
                <img class="img-fluid legend" [src]="legendToShow"
                     alt="legend"
                    *ngIf="legendToShow">
            </div>
        </div>
    </div>
    <div class="card-body">
        <div id="map-container">
            <loading *ngIf="isImageLoading"></loading>
            <div id="slider-carousel-maps" class="carousel" data-interval="false" data-slide-to="0">
                <div class="carousel-inner">
                    <ngb-carousel #carousel interval="300"
                                  [pauseOnHover]="false"
                                  [showNavigationArrows]="false"
                                  [showNavigationIndicators]="false"
                                  (slide)="onSlide($event)">
                        <ng-template ngbSlide *ngFor="let image of images | slice:fromMin; index as i" id="slideId-{{i+fromMin}}">
                            <div class="carousel-caption">
<!--                                <h3>Image[{{i+fromMin}}] - slice {{fromMin}}</h3>-->
                                <h5>
                                    <span class="badge badge-secondary label-time" (click)="toggleUtcTime()">
                                        <ng-container *ngIf="utcTime; else noUtc">
                                            {{ timestamp | amFromUtc | amDateFormat: 'YYYY-MM-DD HH:00' }} (UTC)
                                        </ng-container>
                                        <ng-template #noUtc>
                                            {{ timestamp | amDateFormat: 'YYYY-MM-DD HH:00 (Z)' }}
                                        </ng-template>
                                    </span>
                                </h5>
                            </div>
                            <div class="picsum-img-wrapper">
                                <img [src]="image" style="height: 73vh;" class="mx-auto d-block" *ngIf="image">
                            </div>
                        </ng-template>
                    </ngb-carousel>
                </div>
            </div>
        </div>
    </div>
    <div class="card-footer text-muted">
        <div class="row">
            <div id="slider-bar" class="col d-flex align-items-center" *ngIf="images.length > 0">
                <button type="button" id="play-button" class="btn btn-info btn-sm mr-3" (click)="togglePaused()">
                    <span class="fas" [ngClass]="this.paused ? 'fa-play' : 'fa-pause'"></span>
                </button>
                <div class="w-100">
                    <ion-range-slider #timeSlider
                                      type="single"
                                      min="0"
                                      [max]="maxHour"
                                      [from_min]="fromMin"
                                      grid="true"
                                      prefix="+"
                                      postfix=" h"
                                      to_shadow="true"
                                      step="1"
                                      [grid_num]="grid_num"
                                      from_shadow="true"
                                      (onChange)="updateCarousel($event.from)"></ion-range-slider>
                </div>
            </div>
        </div>
    </div>
</div>
