<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h4 class="modal-title mb-0">{{ prov }}</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="activeModal.dismiss()"
    ></button>
  </div>
  <div class="card-body" [ngSwitch]="selectedMetric">
    <div class="d-flex button-container">
      <button
        class="btn btn-outline-secondary me-2 active"
        [class.active]="selectedMetric === 'TM'"
        (click)="selectMetric('TM')"
      >
        {{ "Maximum Temperature" | translate : lang }}
      </button>
      <button
        class="btn btn-outline-secondary me-2"
        [class.active]="selectedMetric === 'Tm'"
        (click)="selectMetric('Tm')"
      >
        {{ "Minimum Temperature" | translate : lang }}
      </button>
      <button
        class="btn btn-outline-secondary"
        [class.active]="selectedMetric === 'P'"
        (click)="selectMetric('P')"
      >
        {{ "Total Precipitation" | translate : lang }}
      </button>
    </div>

    <div #containerRef>
      <combo-chart-seasonal-component
        *ngIf="lineChart?.length > 0"
        [view]="[containerRef.offsetWidth, 400]"
        [yAxisLabel]="yLabel"
        [results]="currentResults"
        [scheme]="colorScheme"
        [lineChart]="lineChart"
        [yScaleMin]="yMin"
        [yScaleMax]="yMax"
      >
        <ng-template #seriesTooltipTemplate let-model="model">
          <div class="area-tooltip-container">
            <span class="d-block"
              ><b>{{ model[0].name }}</b></span
            >
            <div class="tooltip-item">
              <span
                class="tooltip-item-color"
                [style.background-color]="'#FF0000'"
              ></span>
              {{ "Climate Max" }} : <b>{{ model[2].value }}</b> {{ boxUnit }}
            </div>
            <div class="tooltip-item">
              <span
                class="tooltip-item-color"
                [style.background-color]="'#000000'"
              ></span>
              {{ "Climate Average" }} : <b>{{ model[0].value }}</b>
              {{ boxUnit }}
            </div>
            <div class="tooltip-item">
              <span
                class="tooltip-item-color"
                [style.background-color]="'#87CEEB'"
              ></span>
              {{ "Climate Min" }} : <b>{{ model[1].value }}</b> {{ boxUnit }}
            </div>
            <span class="d-block"><b>Boxplot</b> ({{ boxUnit }})</span>
            <div>
              10째: <b>{{ currentMonthlyMap[model[0].name][0].value }} </b>,
              Median: <b>{{ currentMonthlyMap[model[0].name][2].value }} </b>,
              90째: <b>{{ currentMonthlyMap[model[0].name][4].value }} </b>
            </div>
            <div>
              25째: <b>{{ currentMonthlyMap[model[0].name][1].value }} </b>, 75째:
              <b>{{ currentMonthlyMap[model[0].name][3].value }} </b>
            </div>
          </div>
        </ng-template>
      </combo-chart-seasonal-component>
    </div>
  </div>
</div>
