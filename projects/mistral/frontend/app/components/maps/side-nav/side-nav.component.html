<nav class="map-sidenav" [class.collapsed]="isCollapsed">
  <div class="map-sidenav-menu">
    <label
      class="toggle"
      (click)="changeCollapse()"
      [class.collapsed]="isCollapsed"
    ></label>

    <ul class="selector" *ngIf="varConfig">
      <!-- Layers -->
      <li
        class="sidenav-item"
        *ngFor="let item of varConfig | keyvalue : valueAscOrder"
      >
        <span
          *ngIf="item.key !== 'snow' || showObsFilter"
          class="{{ item.key }} clickable"
          (click)="toggleLayer($event, item.key)"
          placement="left"
          [ngbTooltip]="tip"
          [disableTooltip]="!isCollapsed"
        ></span>
        <ng-template #tip>
          {{ item.value.label | translate : lang | titlecase }}
        </ng-template>
        <a
          href="#"
          *ngIf="!isCollapsed"
          (click)="toggleLayer($event, item.key)"
        >
          <span
            class="nav-text"
            *ngIf="item.key !== 'snow' || showObsFilter"
            i18n
          >
            {{ item.value.label | translate : lang }}
          </span>
        </a>

        <div
          *ngIf="item.key === 'ws10m' && windShow && showObsFilter"
          class="form-switch wind-switch d-flex mt-1"
        >
          <input
            id="windSwitch"
            type="checkbox"
            class="form-check-input clickable mt-1"
            [checked]="windConvert"
            (change)="toggleWindConvert()"
          />
          <label class="form-check-label" for="windSwitch"></label>
          <p i18n>{{ "m/s - km/h" | translate : lang }}</p>
        </div>
      </li>
    </ul>

    <ul class="selector">
      <!-- Network + Quality Control -->
      <li class="sidenav-item" *ngIf="showObsFilter">
        <span
          class="networks"
          placement="left"
          [ngbTooltip]="'Networks'"
          [disableTooltip]="!isCollapsed"
        ></span>
        <a href="#" *ngIf="!isCollapsed">
          <span class="nav-text" i18n>Networks</span>
        </a>
        <select
          class="form-select networks-select"
          aria-label="Default select example"
          [(ngModel)]="selectedOption"
          (change)="onNetworkChange(selectedOption)"
        >
          <option [ngValue]="null" disabled selected>
            Open this select menu
          </option>
          <option *ngFor="let option of dropdownOptions" [value]="option">
            {{ option }}
          </option>
        </select>
      </li>
      <!--<li class="selettore-quality-control" *ngIf="showObsFilter">
        <label>
          <input
            type="checkbox"
            class="clickable"
            [(ngModel)]="selectedQuality"
            (change)="onQualitySelected($event)"
          />
          <div>Quality Control Filter</div>
        </label>
      </li>-->
    </ul>
    <ul class="selector">
      <!-- Download Data -->
      <li class="sidenav-item dropdown mt-2" *ngIf="showObsFilter">
        <div class="d-flex align-items-center">
          <button
            type="button"
            class="btn btn-border-classic no-rounded ms-1"
            (click)="download()"
          >
            <i class="fa fa-download"></i>
          </button>
          <label *ngIf="!isCollapsed" class="nav-text fw-bold ms-2"
            >DOWNLOAD DATA</label
          >
        </div>
      </li>
    </ul>

    <ul class="selector">
      <!-- Zoom Controls -->
      <li class="sidenav-item zoom" *ngIf="mode == modes.adv">
        <span
          class="plus clickable"
          [ngClass]="{ isDisabled: zLevel === map.getMaxZoom() }"
          (click)="zoom($event, 'in')"
          placement="left"
          [ngbTooltip]="'Zoom in'"
          [disableTooltip]="!isCollapsed"
        ></span>
        <a href="#" *ngIf="!isCollapsed" (click)="zoom($event, 'in')">
          <span
            class="nav-text"
            [ngClass]="{ isDisabled: zLevel === map.getMaxZoom() }"
            i18n
            >Zoom in</span
          >
        </a>
      </li>

      <li class="sidenav-item last" *ngIf="mode == modes.adv">
        <span
          class="minus clickable"
          [ngClass]="{ isDisabled: zLevel === map.getMinZoom() }"
          (click)="zoom($event, 'out')"
          placement="left"
          [ngbTooltip]="'Zoom out'"
          [disableTooltip]="!isCollapsed"
        ></span>
        <a href="#" *ngIf="!isCollapsed" (click)="zoom($event, 'out')">
          <span
            class="nav-text"
            [ngClass]="{ isDisabled: zLevel === map.getMinZoom() }"
            i18n
            >Zoom out</span
          >
        </a>
      </li>
    </ul>
    <span style="font-family: 'Titillium Web', sans-serif">
      {{ "Real-time data, not validated" | translate : lang }}
    </span>
  </div>
</nav>
